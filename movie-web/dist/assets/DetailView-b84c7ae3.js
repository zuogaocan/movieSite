import{k as N,u as F,l as u,r as _,o as M,a as c,b as a,c as l,d as t,f as v,g as y,t as o,p as i,F as T,i as $,E as R,q as V,j as S}from"./index-8b551f78.js";import{m as j}from"./index-6bb078dc.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const L="https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png";const U={class:"detail-page"},z={class:"container"},G={key:0,class:"loading-container"},H={key:1,class:"error-container"},J={key:2,class:"detail-container"},K={class:"detail-header"},O={class:"detail-poster"},P=["src","alt"],Q={class:"detail-info"},W={class:"detail-title"},X={class:"detail-meta"},Y={key:0,class:"detail-item"},Z={key:1,class:"detail-item"},ee={key:2,class:"detail-item"},se={key:3,class:"detail-item"},te={key:4,class:"detail-item"},ae={key:5,class:"detail-item"},le={key:6,class:"detail-item"},oe={key:7,class:"detail-item"},ie={key:0,class:"detail-desc"},ne={key:0,class:"episodes-container"},de={class:"episodes-grid"},re={__name:"DetailView",setup(ue){const p=N(),h=F(),f=u(()=>p.params.id),I=u(()=>p.query.episode||""),k=u(()=>p.query.source||""),e=_(null),m=_(!1),r=_(""),w=L,g=u(()=>!e.value||!e.value.score?0:parseFloat(e.value.score)/2),x=async()=>{if(f.value){m.value=!0,r.value="";try{const n=await j.getDetail(f.value,k.value);e.value=n,console.log("详情数据:",e.value),n||(r.value="未找到该影片")}catch(n){console.error("获取详情失败:",n),r.value="获取影片详情失败，请稍后重试",R.error("获取影片详情失败")}finally{m.value=!1}}},C=(n,s)=>{h.push({name:"play",params:{id:n,episode:s},query:{source:k.value}})},D=n=>{console.log("详情页图片加载失败，使用占位图"),n.target.src=w};return M(()=>{x()}),(n,s)=>{const E=c("el-skeleton"),b=c("el-button"),B=c("el-empty"),q=c("el-rate");return a(),l("div",U,[t("div",z,[m.value?(a(),l("div",G,[v(E,{rows:10,animated:""})])):r.value?(a(),l("div",H,[v(B,{description:r.value},{default:y(()=>[v(b,{onClick:s[0]||(s[0]=d=>n.$router.back())},{default:y(()=>s[2]||(s[2]=[V("返回")])),_:1})]),_:1},8,["description"])])):e.value?(a(),l("div",J,[t("div",K,[t("div",O,[t("img",{src:e.value.coverImage,alt:e.value.name,onError:D},null,40,P)]),t("div",Q,[t("h1",W,o(e.value.name),1),t("div",X,[e.value.score?(a(),l("div",Y,[s[3]||(s[3]=t("span",{class:"detail-label"},"评分:",-1)),v(q,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=d=>g.value=d),disabled:"","text-color":"#ff9900"},null,8,["modelValue"]),t("span",null,o(e.value.score),1)])):i("",!0),e.value.type?(a(),l("div",Z,[s[4]||(s[4]=t("span",{class:"detail-label"},"类型:",-1)),t("span",null,o(e.value.type),1)])):i("",!0),e.value.director?(a(),l("div",ee,[s[5]||(s[5]=t("span",{class:"detail-label"},"导演:",-1)),t("span",null,o(e.value.director),1)])):i("",!0),e.value.actor?(a(),l("div",se,[s[6]||(s[6]=t("span",{class:"detail-label"},"演员:",-1)),t("span",null,o(e.value.actor),1)])):i("",!0),e.value.area?(a(),l("div",te,[s[7]||(s[7]=t("span",{class:"detail-label"},"地区:",-1)),t("span",null,o(e.value.area),1)])):i("",!0),e.value.year?(a(),l("div",ae,[s[8]||(s[8]=t("span",{class:"detail-label"},"年份:",-1)),t("span",null,o(e.value.year),1)])):i("",!0),e.value.status?(a(),l("div",le,[s[9]||(s[9]=t("span",{class:"detail-label"},"状态:",-1)),t("span",null,o(e.value.status),1)])):i("",!0),e.value.updateTime?(a(),l("div",oe,[s[10]||(s[10]=t("span",{class:"detail-label"},"更新时间:",-1)),t("span",null,o(e.value.updateTime),1)])):i("",!0)]),e.value.description?(a(),l("div",ie,[s[11]||(s[11]=t("div",{class:"detail-label"},"剧情简介:",-1)),t("p",null,o(e.value.description),1)])):i("",!0)])]),e.value.episodes&&e.value.episodes.length?(a(),l("div",ne,[s[12]||(s[12]=t("h2",{class:"episodes-title"},"选集播放",-1)),t("div",de,[(a(!0),l(T,null,$(e.value.episodes,d=>(a(),S(b,{key:d.episode,onClick:ce=>C(e.value.id,d.episode),type:d.episode===I.value?"primary":"",class:"episode-btn"},{default:y(()=>[V(o(d.episode),1)]),_:2},1032,["onClick","type"]))),128))])])):i("",!0)])):i("",!0)])])}}},_e=A(re,[["__scopeId","data-v-a95f2c29"]]);export{_e as default};
